!function($){$.fn.lightbox_me=function(options){return this.each((function(){var opts=$.extend({},$.fn.lightbox_me.defaults,options),$overlay=$(),$self=$(this),$iframe=$('<iframe id="foo" style="z-index: '+(opts.zIndex+1)+';border: none; margin: 0; padding: 0; position: absolute; width: 100%; height: 100%; top: 0; left: 0; filter: mask();"/>');if(opts.showOverlay){var $currentOverlays=$(".js_lb_overlay:visible");$overlay=$currentOverlays.length>0?$('<div class="lb_overlay_clear js_lb_overlay"/>'):$('<div class="'+opts.classPrefix+'_overlay js_lb_overlay"/>')}function closeLightbox(){var s=$self[0].style;opts.destroyOnClose?$self.add($overlay).remove():$self.add($overlay).hide(),opts.parentLightbox&&opts.parentLightbox.fadeIn(200),opts.preventScroll&&$("body").css("overflow",""),$iframe.remove(),$self.undelegate(opts.closeSelector,"click"),$self.unbind("close",closeLightbox),$self.unbind("repositon",setSelfPosition),$(window).unbind("resize",setOverlayHeight),$(window).unbind("resize",setSelfPosition),$(window).unbind("scroll",setSelfPosition),$(window).unbind("keyup.lightbox_me"),opts.onClose()}function observeKeyPress(e){(27==e.keyCode||27==e.DOM_VK_ESCAPE&&0==e.which)&&opts.closeEsc&&closeLightbox()}function setOverlayHeight(){$(window).height()<$(document).height()?($overlay.css({height:$(document).height()+"px"}),$iframe.css({height:$(document).height()+"px"})):$overlay.css({height:"100%"})}function setSelfPosition(){var s=$self[0].style;if($self.css({left:"50%",marginLeft:$self.outerWidth()/2*-1,zIndex:opts.zIndex+3}),$self.height()+80>=$(window).height()&&"absolute"!=$self.css("position")){var topOffset=$(document).scrollTop()+40;$self.css({position:"absolute",top:topOffset+"px",marginTop:0})}else $self.height()+80<$(window).height()&&(opts.centered?$self.css({position:"fixed",top:"50%",marginTop:$self.outerHeight()/2*-1}):$self.css({position:"fixed"}).css(opts.modalCSS),opts.preventScroll&&$("body").css("overflow","hidden"))}$("body").append($self.hide()).append($overlay),opts.showOverlay&&(setOverlayHeight(),$overlay.css({position:"absolute",width:"100%",top:0,left:0,right:0,bottom:0,zIndex:opts.zIndex+2,display:"none"}),$overlay.hasClass("lb_overlay_clear")||$overlay.css(opts.overlayCSS)),opts.showOverlay?$overlay.fadeIn(opts.overlaySpeed,(function(){setSelfPosition(),$self[opts.appearEffect](opts.lightboxSpeed,(function(){setOverlayHeight(),setSelfPosition(),opts.onLoad()}))})):(setSelfPosition(),$self[opts.appearEffect](opts.lightboxSpeed,(function(){opts.onLoad()}))),opts.parentLightbox&&opts.parentLightbox.fadeOut(200),$(window).resize(setOverlayHeight).resize(setSelfPosition).scroll(setSelfPosition),$(window).bind("keyup.lightbox_me",observeKeyPress),opts.closeClick&&$overlay.click((function(e){closeLightbox(),e.preventDefault})),$self.delegate(opts.closeSelector,"click",(function(e){closeLightbox(),e.preventDefault()})),$self.bind("close",closeLightbox),$self.bind("reposition",setSelfPosition)}))},$.fn.lightbox_me.defaults={appearEffect:"fadeIn",appearEase:"",overlaySpeed:250,lightboxSpeed:300,closeSelector:".close",closeClick:!0,closeEsc:!0,destroyOnClose:!1,showOverlay:!0,parentLightbox:!1,preventScroll:!1,onLoad:function(){},onClose:function(){},classPrefix:"lb",zIndex:999,centered:!1,modalCSS:{top:"40px"},overlayCSS:{background:"black",opacity:.3}}}(jQuery);